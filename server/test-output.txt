
> server@1.0.0 test
> jest statusUpdateAndMessaging.integration.test.ts

  console.log
    MinIO initialized successfully

      at src/app.ts:85:13

  console.log
    [2026-01-03T16:44:30.736Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:30.992Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:31.132Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:31.202Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:31.352Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:31.511Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:31.676Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:31.746Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:31.861Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:32.016Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:32.168Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:32.263Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:33.104Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:33.237Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:33.373Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:33.531Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:33.612Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:33.707Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:33.880Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:34.036Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:34.106Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:34.213Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:34.382Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:34.569Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:34.647Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:34.761Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:34.910Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:35.045Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:35.123Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:35.259Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:35.417Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:35.555Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:35.627Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:35.738Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:36.430Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:36.721Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:36.805Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:36.915Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:37.072Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:37.229Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:37.382Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:37.451Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:37.565Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:37.702Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:37.848Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:38.002Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:38.076Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:38.185Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:38.332Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:38.474Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:38.546Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:38.653Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:38.799Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:38.945Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:39.010Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:39.113Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:39.250Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:39.400Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:39.469Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:39.574Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:39.720Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:39.867Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:39.946Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:40.054Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:40.199Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:40.347Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:40.486Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:40.556Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:40.659Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:40.799Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:40.947Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:41.018Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:41.121Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:41.259Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:41.394Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:41.469Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.log
    [2026-01-03T16:44:41.587Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:41.735Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:41.861Z] POST /api/session

      at src/app.ts:26:13

  console.log
    [2026-01-03T16:44:41.923Z] POST /api/reports

      at src/app.ts:26:13

  console.error
    [400] BadRequest: At least one photo is required

      25 |
      26 |   // Logga sempre l'errore, anche in produzione
    > 27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
         |           ^
      28 |   if (err.stack) console.error(err.stack);
      29 |
      30 |   const response: any = {

      at errorHandler (src/middlewares/errorMiddleware.ts:27:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

  console.error
    Error: At least one photo is required
        at validatePhotos (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:34:11)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:154:3
        at Generator.next (<anonymous>)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:41:71
        at new Promise (<anonymous>)
        at Object.<anonymous>.__awaiter (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:37:12)
        at createReport (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\controllers\reportController.ts:156:12)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\errorMiddleware.ts:47:21
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at validateTurinBoundaries (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\validateTurinBoundaries.ts:23:3)
        at Layer.handleRequest (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\layer.js:152:17)
        at next (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\router\lib\route.js:157:13)
        at D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\src\middlewares\uploadsMiddleware.ts:48:9
        at done (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:59:7)
        at indicateDone (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:63:68)
        at Multipart.<anonymous> (D:\my\Mastering\3rd\Software Engineering II\MainProject\participium\server\node_modules\multer\lib\make-middleware.js:187:7)
        at Multipart.emit (node:events:518:28)
        at emitCloseNT (node:internal/streams/destroy:148:10)
        at processTicksAndRejections (node:internal/process/task_queues:89:21)

      26 |   // Logga sempre l'errore, anche in produzione
      27 |   console.error(`[${statusCode}] ${errorName}: ${message}`);
    > 28 |   if (err.stack) console.error(err.stack);
         |                          ^
      29 |
      30 |   const response: any = {
      31 |     code: statusCode,

      at errorHandler (src/middlewares/errorMiddleware.ts:28:26)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)

node.exe : FAIL test/integration/routes/statusUpdateAndMessaging.integration.test.ts (18.248 s)
所在位置 C:\Program Files\nodejs\npm.ps1:29 字符: 3
+   & $NODE_EXE $NPM_CLI_JS $args
+   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (FAIL test/integ...t.ts (18.248 s):String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  Story 11: Report Status Updates and Messaging Integration Tests
    Status Update Functionality
      脳 should allow technical staff to update report status to IN_PROGRESS (716 ms)
      脳 should allow technical staff to update report status to RESOLVED (524 ms)
      脳 should allow technical staff to update report status to SUSPENDED (649 ms)
      脳 should reject status update from non-assigned technical staff (1200 ms)
      脳 should reject status update from citizens (499 ms)
      脳 should reject invalid status values (537 ms)
    Messaging Functionality
      脳 should allow technical staff to send message to citizen (479 ms)
      脳 should allow citizen to reply to technical staff (505 ms)
      脳 should allow both parties to view message history (1174 ms)
      脳 should reject messages from non-assigned technical staff (644 ms)
      脳 should reject messages from citizens on reports they don't own (622 ms)
      脳 should reject empty messages (471 ms)
    Notification Functionality
      脳 should allow citizen to view all notifications (467 ms)
      脳 should allow citizen to filter unread notifications only (460 ms)
      脳 should allow citizen to mark notification as read (473 ms)
      脳 should prevent citizen from marking another user's notification as read (609 ms)
      脳 should include report context in notifications (462 ms)
    Combined Workflow: Status Updates and Messaging
      脳 should handle complete workflow from report creation to resolution with messaging (452 ms)
      脳 should handle multiple status updates with corresponding notifications (454 ms)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Status Update Functionality 鈥?should allow 
technical staff to update report status to IN_PROGRESS

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

      124 |         .field("isAnonymous", "false");
      125 |
    > 126 |       expect(reportRes.status).toBe(201);
          |                                ^
      127 |       const reportId = reportRes.body.report.id;
      128 |
      129 |       // PR approves and assigns to technical staff

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:126:32
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Status Update Functionality 鈥?should allow 
technical staff to update report status to RESOLVED

    TypeError: Cannot read properties of undefined (reading 'id')

      168 |         .field("isAnonymous", "false");
      169 |
    > 170 |       const reportId = reportRes.body.report.id;
          |                                              ^
      171 |
      172 |       await prAgent
      173 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:170:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Status Update Functionality 鈥?should allow 
technical staff to update report status to SUSPENDED

    TypeError: Cannot read properties of undefined (reading 'id')

      212 |         .field("isAnonymous", "false");
      213 |
    > 214 |       const reportId = reportRes.body.report.id;
          |                                              ^
      215 |
      216 |       await prAgent
      217 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:214:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Status Update Functionality 鈥?should reject 
status update from non-assigned technical staff

    TypeError: Cannot read properties of undefined (reading 'id')

      244 |         .field("isAnonymous", "false");
      245 |
    > 246 |       const reportId = reportRes.body.report.id;
          |                                              ^
      247 |
      248 |       await prAgent
      249 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:246:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Status Update Functionality 鈥?should reject 
status update from citizens

    TypeError: Cannot read properties of undefined (reading 'id')

      275 |         .field("isAnonymous", "false");
      276 |
    > 277 |       const reportId = reportRes.body.report.id;
          |                                              ^
      278 |
      279 |       await prAgent
      280 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:277:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Status Update Functionality 鈥?should reject 
invalid status values

    TypeError: Cannot read properties of undefined (reading 'id')

      305 |         .field("isAnonymous", "false");
      306 |
    > 307 |       const reportId = reportRes.body.report.id;
          |                                              ^
      308 |
      309 |       await prAgent
      310 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:307:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Messaging Functionality 鈥?should allow technical 
staff to send message to citizen

    TypeError: Cannot read properties of undefined (reading 'id')

      341 |         .field("isAnonymous", "false");
      342 |
    > 343 |       const reportId = reportRes.body.report.id;
          |                                              ^
      344 |
      345 |       await prAgent
      346 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:343:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Messaging Functionality 鈥?should allow citizen 
to reply to technical staff

    TypeError: Cannot read properties of undefined (reading 'id')

      381 |         .field("isAnonymous", "false");
      382 |
    > 383 |       const reportId = reportRes.body.report.id;
          |                                              ^
      384 |
      385 |       await prAgent
      386 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:383:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Messaging Functionality 鈥?should allow both 
parties to view message history

    TypeError: Cannot read properties of undefined (reading 'id')

      425 |         .field("isAnonymous", "false");
      426 |
    > 427 |       const reportId = reportRes.body.report.id;
          |                                              ^
      428 |
      429 |       await prAgent
      430 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:427:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Messaging Functionality 鈥?should reject messages 
from non-assigned technical staff

    TypeError: Cannot read properties of undefined (reading 'id')

      471 |         .field("isAnonymous", "false");
      472 |
    > 473 |       const reportId = reportRes.body.report.id;
          |                                              ^
      474 |
      475 |       await prAgent
      476 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:473:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Messaging Functionality 鈥?should reject messages 
from citizens on reports they don't own

    TypeError: Cannot read properties of undefined (reading 'id')

      503 |         .field("isAnonymous", "false");
      504 |
    > 505 |       const reportId = reportRes.body.report.id;
          |                                              ^
      506 |
      507 |       await prAgent
      508 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:505:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Messaging Functionality 鈥?should reject empty 
messages

    TypeError: Cannot read properties of undefined (reading 'id')

      534 |         .field("isAnonymous", "false");
      535 |
    > 536 |       const reportId = reportRes.body.report.id;
          |                                              ^
      537 |
      538 |       await prAgent
      539 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:536:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Notification Functionality 鈥?should allow 
citizen to view all notifications

    TypeError: Cannot read properties of undefined (reading 'id')

      571 |         .field("isAnonymous", "false");
      572 |
    > 573 |       const reportId = reportRes.body.report.id;
          |                                              ^
      574 |
      575 |       await prAgent
      576 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:573:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Notification Functionality 鈥?should allow 
citizen to filter unread notifications only

    TypeError: Cannot read properties of undefined (reading 'id')

      613 |         .field("isAnonymous", "false");
      614 |
    > 615 |       const reportId = reportRes.body.report.id;
          |                                              ^
      616 |
      617 |       await prAgent
      618 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:615:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Notification Functionality 鈥?should allow 
citizen to mark notification as read

    TypeError: Cannot read properties of undefined (reading 'id')

      646 |         .field("isAnonymous", "false");
      647 |
    > 648 |       const reportId = reportRes.body.report.id;
          |                                              ^
      649 |
      650 |       await prAgent
      651 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:648:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Notification Functionality 鈥?should prevent 
citizen from marking another user's notification as read

    TypeError: Cannot read properties of undefined (reading 'id')

      691 |         .field("isAnonymous", "false");
      692 |
    > 693 |       const reportId = reportRes.body.report.id;
          |                                              ^
      694 |
      695 |       await prAgent
      696 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:693:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Notification Functionality 鈥?should include 
report context in notifications

    TypeError: Cannot read properties of undefined (reading 'id')

      729 |         .field("isAnonymous", "false");
      730 |
    > 731 |       const reportId = reportRes.body.report.id;
          |                                              ^
      732 |
      733 |       await prAgent
      734 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:731:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Combined Workflow: Status Updates and Messaging 
鈥?should handle complete workflow from report creation to resolution with messaging

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

      773 |         .field("isAnonymous", "false");
      774 |
    > 775 |       expect(reportRes.status).toBe(201);
          |                                ^
      776 |       const reportId = reportRes.body.report.id;
      777 |
      778 |       // 2. PR approves and assigns

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:775:32
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

  鈼?Story 11: Report Status Updates and Messaging Integration Tests 鈥?Combined Workflow: Status Updates and Messaging 
鈥?should handle multiple status updates with corresponding notifications

    TypeError: Cannot read properties of undefined (reading 'id')

      851 |         .field("isAnonymous", "false");
      852 |
    > 853 |       const reportId = reportRes.body.report.id;
          |                                              ^
      854 |
      855 |       await prAgent
      856 |         .post(`/api/reports/${reportId}/approve`)

      at test/integration/routes/statusUpdateAndMessaging.integration.test.ts:853:46
      at fulfilled (test/integration/routes/statusUpdateAndMessaging.integration.test.ts:34:58)

Test Suites: 1 failed, 1 total
Tests:       19 failed, 19 total
Snapshots:   0 total
Time:        18.802 s, estimated 22 s
Ran all test suites matching /statusUpdateAndMessaging.integration.test.ts/i.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after 
all tests finished?
